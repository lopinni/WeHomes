<apex:page sidebar="false" showHeader="false">
  <style>
    html, body {
      margin: 0;
      height: 100%;
    }
  </style>

  <head>
    <META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=UTF-8"/>
    <apex:slds />
  </head>

  <div class="slds-scope" style="padding:1rem">
    <div class="slds-align_absolute-center" style="padding:1rem">
      <apex:image url="{!$Resource.WeHomesLogo}"/>
    </div>
    <div class="slds-align_absolute-center">
      <div class="slds-text-heading_large"> {!$label.WeHomePageTitle} </div>
    </div>
    
    <div class="slds-align_absolute-center" style="padding:1rem">
      <form action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" 
            method="POST" 
            style="width: 40%"
      >
        <input type="hidden" name="oid" value="00D68000000ZNlj"/>
        <input type="hidden" 
              name="retURL" 
              value="https://britenet34-dev-ed.develop.my.salesforce-sites.com/WeHomes/WH_ThankYou"
        />

        <div class="slds-form-element">
          <label for="first_name" class="slds-form-element__label">
            <abbr class="slds-required" title="required"> * </abbr>
            {!$label.FirstName}
          </label>
          <div class="slds-form-element__control">
            <input id="first_name" 
                  maxlength="40" 
                  name="first_name" 
                  size="20" 
                  type="text" 
                  class="slds-input" 
                  required="true"
            />
          </div>
        </div>
        <div class="slds-form-element">
          <label for="last_name" class="slds-form-element__label"> 
            <abbr class="slds-required" title="required"> * </abbr>
            {!$label.LastName}
          </label>
          <div class="slds-form-element__control">
            <input id="last_name" 
                  maxlength="80" 
                  name="last_name" 
                  size="20" 
                  type="text" 
                  class="slds-input" 
                  required="true"
            />
          </div>
        </div>
        <div class="slds-form-element">
          <label for="email" class="slds-form-element__label"> 
            <abbr class="slds-required" title="required"> * </abbr>
            {!$label.email} 
          </label>
          <div class="slds-form-element__control">
            <input id="email" 
                  maxlength="80" 
                  name="email" 
                  size="20" 
                  type="text" 
                  class="slds-input" 
                  required="true"
            />
          </div>
        </div>
        <div class="slds-form-element">
          <label for="phone" class="slds-form-element__label"> 
            <abbr class="slds-required" title="required"> * </abbr>
            {!$label.phone}
          </label>
          <div class="slds-form-element__control">
            <input id="phone" 
                  maxlength="40" 
                  name="phone" 
                  size="20" 
                  type="text" 
                  class="slds-input" 
                  required="true"
            />
          </div>
        </div>
        <div class="slds-form-element">
          <label class="slds-form-element__label"> {!$label.ProductOfInterest} </label>
          <div class="slds-form-element__control">
            <select id="00N68000000MU5i" 
                    name="00N68000000MU5i" 
                    title="Product Of Interest" 
                    class="slds-input" 
                    onchange="changeRequirements()"
            >
              <option value="Apartments"> {!$label.apartments} </option>
              <option value="Business Premises"> {!$label.BusinessPremises} </option>
            </select>
          </div>
        </div>
        <div class="slds-form-element">
          <label for="company" class="slds-form-element__label"> 
            <abbr class="slds-required" title="required" id="companyRequirementInfo"> </abbr>
            {!$label.company}
          </label>
          <div class="slds-form-element__control">
            <input id="company" 
                  maxlength="40" 
                  name="company" 
                  size="20" 
                  type="text" 
                  class="slds-input"
                  required=""
            />
          </div>
        </div>

        <div class="slds-align_left" style="padding:1rem">
          <abbr class="slds-required" title="required"> * </abbr> - {!$label.RequiredField}
        </div>
        <div class="slds-align_absolute-center" style="padding:0.5rem">
          <input type="submit" 
                name="submit" 
                class="slds-button slds-button_success" 
                value="{!$label.submit}"
          />
        </div>
      </form>
    </div>
  </div>

  <script>
    function filterSpecialCharacters() {
      let firstNameField = document.getElementById("first_name");
      let lastNameField = document.getElementById("last_name");
      let emailField = document.getElementById("email");
      let phoneField = document.getElementById("phone");
      let companyField = document.getElementById("company");

      firstNameField.value = firstNameField.value.replace(/[^\w\s]/gi, '');
      lastNameField.value = lastNameField.value.replace(/[^\w\s]/gi, '');
      emailField.value = emailField.value.replace(/[^\w\s]/gi, '');
      phoneField.value = phoneField.value.replace(/[^\w\s]/gi, '');
      companyField.value = companyField.value.replace(/[^\w\s]/gi, '');
    }

    document.querySelector('form').onsubmit = function(event) {
      filterSpecialCharacters();
    }

    function changeRequirements() {
      let picklist = document.getElementById("00N68000000MU5i");
      let companyField = document.getElementById("company");
      let companyRequirementInfo = document.getElementById("companyRequirementInfo");

      if(picklist.value == "Business Premises") {
        companyField.required = true;
        companyRequirementInfo.innerHTML = "*";
      } else {
        companyField.required = false;
        companyRequirementInfo.innerHTML = "";
      }
    }
  </script>
</apex:page>